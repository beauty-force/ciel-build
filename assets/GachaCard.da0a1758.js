import{g as N,k as T,L as O,x as D,E as V,r as y,o as n,c as r,b as f,w as g,d as s,y as c,t as l,e as b,F as z,W as H,n as q}from"./app.4376b78d.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as P}from"./PlayIcon.485ed453.js";/*! vue-countdown v2.1.3 | (c) 2018-present Chen Fengyuan | MIT */const h=1e3,_=60*h,m=60*_,v=24*m,x="abort",w="end",M="progress",S="start",E="visibilitychange";var A=N({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:e=>e>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:e=>e>=0},transform:{type:Function,default:e=>e}},emits:[x,w,M,S],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0,autoPauseOnHide:!1}},computed:{days(){return Math.floor(this.totalMilliseconds/v)},hours(){return Math.floor(this.totalMilliseconds%v/m)},minutes(){return Math.floor(this.totalMilliseconds%m/_)},seconds(){return Math.floor(this.totalMilliseconds%_/h)},milliseconds(){return Math.floor(this.totalMilliseconds%h)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/m)},totalMinutes(){return Math.floor(this.totalMilliseconds/_)},totalSeconds(){return Math.floor(this.totalMilliseconds/h)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(E,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(E,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(S),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const e=Math.min(this.totalMilliseconds,this.interval);if(e>0){let i,t;const d=o=>{i||(i=o),t||(t=o);const a=o-i;a>=e||a+(o-t)/2>=e?this.progress():this.requestId=requestAnimationFrame(d),t=o};this.requestId=requestAnimationFrame(d)}else this.end()},pause(){cancelAnimationFrame(this.requestId),this.requestId=0},progress(){!this.counting||(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(M,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){!this.counting||(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(x))},end(){!this.counting||(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(w))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.requestId===0&&this.autoPauseOnHide&&(this.update(),this.continue()),this.autoPauseOnHide=!1;break;case"hidden":this.requestId>0&&(this.autoPauseOnHide=!0,this.pause());break}}},render(){return T(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const B={components:{Link:O,PlayIcon:P,VueCountdown:A},props:{gacha:Object,url_edit:String,reinitializeLazyLoading:Function},data(){return{category_share:D().props.value.category_share,url_card:"",countdown:!0}},methods:{get_progress_value(){let e=Math.round(this.gacha.count_rest*100/this.gacha.count_card),i="#fe0000";return e>33&&(i="#99fe00"),e>66&&(i="#99fe00"),{value:e,bg_color:i}},format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},getImageClass(e){return"url('"+e+"')"},clickCard(){this.gacha.count_rest>0&&!this.url_edit&&(window.location.href=this.url_card)},destroyGacha(e){confirm("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F")&&V.Inertia.delete(route("admin.gacha.destroy",{id:e}),{onSuccess:()=>{this.reinitializeLazyLoading&&this.reinitializeLazyLoading()}})},transform(e){return Object.entries(e).forEach(([i,t])=>{const d=t<10&&i!="days"?`0${t}`:t;t<2&&i.replace(/s$/,""),e[i]=`${d}`}),e}},mounted(){!this.url_edit&&this.gacha.count_rest>0&&(this.url_card=route("user.gacha",this.gacha.id))}},G={class:"cursor-pointer border border-red-500 mb-0 relative rounded-[20px] shadow w-full bg-cover overflow-hidden bg-gradient-to-r from-yellow-600 via-yellow-300 to-yellow-600",style:{borderWidth:"3px"}},R=["data-src"],j={key:0,class:"absolute inset-0 flex items-center bg-neutral-900/40"},U={class:"w-full py-1"},W={class:"py-2 border-y bg-white bg-opacity-90"},Y={key:0},J={key:1},K={class:"text-center"},Q={class:"bg-gradient-to-r from-pink-600 to-sky-600 via-yellow-500 bg-clip-text text-transparent font-black text-3xl font-[mplus2]"},X={key:0,class:"mr-3"},Z={key:0,class:"absolute z-20 top-0 left-0 items-center px-2 py-1 bg-green-500 border border-transparent rounded-sm font-semibold text-sm text-white tracking-widest"},$={key:1,class:"absolute z-20 top-0 left-0 items-center px-2 py-1 bg-neutral-500 border border-transparent rounded-sm font-semibold text-sm text-white tracking-widest"},tt={key:2,class:"absolute bottom-0 w-full h-full bg-opacity-70 z-10 bg-neutral-900"},et=s("div",{class:"text-white text-[50px] py-[40px] w-[100%] absolute mt-[30%] text-center font-black"},"SOLD OUT",-1),st=[et],it={class:"pt-2.5 pb-1.5 flex-1"},at={class:"bg-neutral-900 mx-2 py-1 px-1.5 rounded-full"},ot={class:"px-4 text-yellow-400"},nt={class:"flex flex-row justify-between mb-1 px-1"},rt=s("span",{class:"text-xs mr-1"},"\u6B8B",-1),lt={class:"font-semibold text-base oripa_69c7e317-3a13-4a09-82c8-441545e76b2e_oripa_navi_now_rest_class"},ct={class:"text-xs oripa_69c7e317-3a13-4a09-82c8-441545e76b2e_oripa_navi_rest_class"},dt={class:"flex items-center"},ut=s("span",{class:"inline-block pr-1"},[s("img",{class:"w-5 h-5",src:"/images/icon_cash.png"})],-1),ht={class:"font-semibold oripa_69c7e317-3a13-4a09-82c8-441545e76b2e_oripa_navi_point_class"},_t=s("span",null,"PT",-1),mt={class:"mb-1"},ft={class:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700 overflow-hidden"};function gt(e,i,t,d,o,a){const k=y("vue-countdown"),p=y("Link");return n(),r("div",G,[f(p,{href:o.url_card,class:q(["relative flex flex-col h-full oripa_69c7e317-3a13-4a09-82c8-441545e76b2e_oripa_navi_item_class",{"grayscale-[80%]":t.url_edit&&t.gacha.count_rest==0}])},{default:g(()=>[s("img",{"data-src":t.gacha.thumbnail,class:"lazy w-full oripa_69c7e317-3a13-4a09-82c8-441545e76b2e_oripa_navi_thumbnail_class"},null,8,R),o.countdown&&t.gacha.remaining>0&&t.gacha.timeStatus==0?(n(),r("div",j,[s("div",U,[s("div",W,[f(k,{time:t.gacha.remaining*1e3,transform:a.transform,class:"text-neutral-700 flex flex-wrap items-center justify-around px-2 py-0.5 w-full text-xl font-semibold",onEnd:i[0]||(i[0]=u=>o.countdown=!1)},{default:g(({days:u,hours:I,minutes:L,seconds:C})=>[t.gacha.timeStatus==0?(n(),r("span",Y,"\u767A\u58F2\u307E\u3067")):c("",!0),t.gacha.timeStatus==1?(n(),r("span",J,"\u7D42\u4E86\u307E\u3067")):c("",!0),s("span",K,[s("span",Q,[u>0?(n(),r("span",X,l(u)+"\u65E5",1)):c("",!0),b(l(I)+":"+l(L)+":"+l(C),1)])])]),_:1},8,["time","transform"])])])])):c("",!0),t.url_edit?(n(),r(z,{key:1},[f(p,{href:t.url_edit,class:"absolute z-20 top-0 right-0 items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-sm font-semibold text-sm text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150"},{default:g(()=>[b(" \u7DE8\u96C6\u3059\u308B ")]),_:1},8,["href"]),t.gacha.status==1?(n(),r("div",Z," \u516C\u958B ")):(n(),r("div",$," \u975E\u516C\u958B ")),s("button",{onClick:i[1]||(i[1]=u=>a.destroyGacha(t.gacha.id)),class:"z-20 rounded absolute bottom-0 right-0 px-4 py-2 bg-red-500 text-xs text-neutral-50"}," \u524A\u9664 ")],64)):c("",!0),t.gacha.count_rest==0&&!t.url_edit?(n(),r("div",tt,st)):c("",!0),s("div",it,[s("div",at,[s("div",ot,[s("div",nt,[s("div",null,[rt,s("span",lt,l(a.format_number(t.gacha.count_rest)),1),b(" / "),s("span",ct,l(a.format_number(t.gacha.count_card)),1)]),s("div",dt,[ut,s("span",ht,l(a.format_number(t.gacha.point)),1),_t])]),s("div",mt,[s("div",ft,[s("div",{class:"h-4 rounded-full",style:H({width:a.get_progress_value().value+"%",backgroundColor:a.get_progress_value().bg_color})},null,4)])])])])])]),_:1},8,["href","class"])])}const vt=F(B,[["render",gt]]);export{vt as G};
