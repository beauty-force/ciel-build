import{L as x,H as k,r as c,o as n,c as r,b as u,w,F as b,d as s,J as l,a2 as p,K as h,y as a,f as v,n as S,t as d}from"./app.4376b78d.js";import{U as j}from"./UserLayout.083a4488.js";import{V as C,r as L,a as T}from"./ArrowLongUpIcon.74365ebf.js";import{_ as E}from"./_plugin-vue_export-helper.cdc0426e.js";import"./toastify.3d822ec5.js";const U={components:{Link:x,Head:k,UserLayout:j,draggable:C,ArrowLongUpIcon:L,ArrowLongDownIcon:T},props:{errors:Object,auth:Object,ranks:Object},data(){return{subject:"",userType:"all",customEmails:"",emailContent:"",selectedRank:0,message:"",error:"",isSending:!1,summernote:null}},methods:{async sendEmail(){if(this.emailContent=this.summernote.summernote("code"),!this.emailContent.trim()){alert("\u30E1\u30FC\u30EB\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044");return}this.message="",this.error="";let i={subject:this.subject,type:this.userType,content:this.emailContent};if(this.userType==="custom"?i.emails=this.customEmails.split(",").map(t=>t.trim()):this.userType==="customRank"&&(i.rank=this.selectedRank),confirm("\u30E1\u30FC\u30EB\u3092\u9001\u308A\u307E\u3059\u304B\uFF1F")){this.isSending=!0;try{axios.post(route("admin.email.send"),i).then(t=>{this.message=t.data.message,this.isSending=!1})}catch{this.error="\u30E1\u30FC\u30EB\u9001\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",this.isSending=!1}}}},mounted(){this.summernote=window.$("#summernote").summernote({lineHeights:["0.2","0.3","0.4","0.5","0.6","0.8","1.0","1.2","1.4","1.5","2.0","3.0"],fontSizes:[8,9,10,12,14,16,18,20,24,28,32,36],toolbar:[["font",["bold","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph","height"]],["insert",["link","picture"]],["view",["codeview"]]],height:200}),this.summernote.summernote("code","")}},V={class:"p-4 mx-auto max-w-3xl"},R=s("h2",{class:"text-xl font-semibold mb-4"},"\u30E1\u30FC\u30EB\u9001\u4FE1",-1),H={class:"mb-4"},z=s("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"userType"},"\u9001\u4FE1\u5148:",-1),D=s("option",{value:"all"},"\u5168\u3066\u306E\u30E6\u30FC\u30B6\u30FC",-1),N=s("option",{value:"custom"},"\u7279\u5B9A\u306E\u30E6\u30FC\u30B6\u30FC",-1),B=s("option",{value:"customRank"},"\u7279\u5B9A\u30E9\u30F3\u30AF\u306E\u30E6\u30FC\u30B6\u30FC",-1),O=[D,N,B],A={key:0,class:"mb-4"},F=s("label",{for:"emailList",class:"block text-gray-700 text-sm font-bold mb-2"},"\u30E6\u30FC\u30B6\u30FC\u306E\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9 (\u30AB\u30F3\u30DE\u533A\u5207\u308A):",-1),I={key:1,class:"mb-4"},M=s("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"rank"},"\u30E9\u30F3\u30AF\u3092\u9078\u629E",-1),q=["value"],J={class:"mb-4"},K=s("label",{for:"subject",class:"block text-gray-700 text-sm font-bold mb-2"},"\u4EF6\u540D:",-1),G=s("div",{class:"mb-4"},[s("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"emailContent"},"\u30E1\u30FC\u30EB\u5185\u5BB9"),s("div",{id:"summernote",class:"flex-1"})],-1),P=["disabled"],Q={key:0},W={key:1},X={key:2,class:"mt-4 text-green-600"},Y={key:3,class:"mt-4 text-red-600"};function Z(i,t,g,$,e,m){const f=c("Head"),_=c("UserLayout");return n(),r(b,null,[u(f,{title:"\u30E1\u30FC\u30EB\u3092\u9001\u4FE1"}),u(_,null,{default:w(()=>[s("div",V,[R,s("div",H,[z,l(s("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.userType=o),class:"block w-full bg-white border border-gray-300 rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-indigo-500"},O,512),[[p,e.userType]])]),e.userType==="custom"?(n(),r("div",A,[F,l(s("input",{type:"text",id:"emailList","onUpdate:modelValue":t[1]||(t[1]=o=>e.customEmails=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"user1@example.com, user2@example.com"},null,512),[[h,e.customEmails]])])):a("",!0),e.userType==="customRank"?(n(),r("div",I,[M,l(s("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>e.selectedRank=o),class:"block w-full bg-white border border-gray-300 rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-indigo-500"},[(n(!0),r(b,null,v(g.ranks,(o,y)=>(n(),r("option",{value:y},d(o),9,q))),256))],512),[[p,e.selectedRank]])])):a("",!0),s("div",J,[K,l(s("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.subject=o),type:"text",id:"subject",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"\u30E1\u30FC\u30EB\u306E\u4EF6\u540D\u3092\u5165\u529B",required:""},null,512),[[h,e.subject]])]),G,s("button",{onClick:t[4]||(t[4]=(...o)=>m.sendEmail&&m.sendEmail(...o)),class:S(["mt-4 w-full bg-blue-600 text-white font-semibold py-2 rounded-md shadow transition duration-200",{"bg-gray-400":e.isSending,"cursor-not-allowed":e.isSending,"hover:bg-blue-700":!e.isSending}]),disabled:e.isSending},[e.isSending?(n(),r("span",Q,"\u9001\u4FE1\u4E2D...")):(n(),r("span",W,"\u30E1\u30FC\u30EB\u3092\u9001\u4FE1"))],10,P),e.message?(n(),r("div",X,d(e.message),1)):a("",!0),e.error?(n(),r("div",Y,d(e.error),1)):a("",!0)])]),_:1})],64)}const re=E(U,[["render",Z]]);export{re as default};
